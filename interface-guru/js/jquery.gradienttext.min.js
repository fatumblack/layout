/**
 * @author Leechy (leechy@leechy.ru)
 * @link www.artlebedev.ru
 * @requires jQuery
 *
 * Description:
 * gradientText is a jQuery plugin that paints text in gradient colors
 *
 * Usage:
 * $(selector).gradientText(config);
 *
 * config is an object contents configuraton paramenters:
 * 	{Array} colors - array of hex colors, e.g. ['#000000', '#FFFFFF'];
 * 	{Array} toProcess - array of jQuery selectors, matched elements will be toProcessed
 */

!function(t){function n(n,s){function o(){var t=Math.round(n[0].offsetLeft),r=i(t),e=p.size();200>r&&(r=200);for(var s=e;s--;)p[s].style.color=a(Math.round(p[s].offsetLeft-t),r)}function i(t){var n=0;return l.each(function(r){var e=Math.round(this.offsetWidth+this.offsetLeft)-t;e>n&&(n=e)}),n}function a(t,n){for(var r=t>0?t/n:0,e=0;e<s.colors.length;e++){if(fStopPosition=e/(s.colors.length-1),fLastPosition=e>0?(e-1)/(s.colors.length-1):0,r==fStopPosition)return s.colors[e];if(r<fStopPosition)return fCurrentStop=(r-fLastPosition)/(fStopPosition-fLastPosition),f(s.RGBcolors[e-1],s.RGBcolors[e],fCurrentStop)}return s.colors[s.colors.length-1]}function f(t,n,r){for(var s=[],o=0;3>o;o++)s[o]=t[o]+Math.round((n[o]-t[o])*r);return e(s)}function c(){n.find(".gr-text").each(function(){"underline"==t(this).parent().css("text-decoration")&&t(this).parent().find(".gr-letter").css("text-decoration","underline")}),"underline"==n.parent().css("text-decoration")&&n.find(".gr-letter").css("text-decoration","underline")}if(0==n.find("span.gr-text").size()){var u=n.contents().filter(function(){return 3==this.nodeType&&/\S/.test(this.nodeValue)}).wrap('<span class="gr-text" />');if("undefined"!=typeof s.toProcess){var d=s.toProcess.toString();d&&(u=n.find(d).contents().filter(function(){return 3==this.nodeType&&/\S/.test(this.nodeValue)}).wrap('<span class="gr-text" />'))}n.html('<span class="gr-wrap">'+n.html()+"</span>"),n=n.find(".gr-wrap"),n.find("span.gr-text").each(function(){for(var n=t(this).text().split(""),r="",e=n.length,s=0;e>s;s++)r+=" "!=n[s]?'<span class="gr-letter">'+n[s]+"</span>":'<span class="gr-letter"><span style="display:none;">&#8203;</span> </span>';t(this).html(r)})}var l=n.find("span.gr-text"),p=n.find("span.gr-letter");s.RGBcolors=[];for(var h=0;h<s.colors.length;h++)s.RGBcolors[h]=r(s.colors[h]);return"undefined"!=typeof $c?$c.measurer.bind(o):"undefined"!=typeof $measurer?$measurer.bind(o):t(window).resize(o),c(),{update:o}}function r(t){return"#"==t.substr(0,1)&&(t=t.substr(1)),3==t.length&&(t=t.substr(0,1)+t.substr(0,1)+t.substr(1,1)+t.substr(1,1)+t.substr(2,1)+t.substr(2,1)),[parseInt(t.substr(0,2),16),parseInt(t.substr(2,2),16),parseInt(t.substr(4,2),16)]}function e(t){var n="0123456789abcdef";return"#"+n.charAt(parseInt(t[0]/16))+n.charAt(t[0]%16)+n.charAt(parseInt(t[1]/16))+n.charAt(t[1]%16)+n.charAt(parseInt(t[2]/16))+n.charAt(t[2]%16)}t.gradientText=t.gradientText||{version:"1.0"},t.gradientText.conf={colors:["#5f3db6","#c10000"],toProcess:[]},t.gradientTextSetup=function(n){t.extend(t.gradientText.conf,n)},t.fn.gradientText=function(r){var e=this.data("gradientText");if(e)return e;r?"undefined"==typeof r.colors&&(r.colors=t.gradientText.conf.colors):r=t.gradientText.conf;var s=[];return this.each(function(e){s[e]=new n(t(this),r),t(this).data("gradientText",s[e])}),t(window).load(function(){for(var t=s.length,n=0;t>n;n++)s[n].update()}),r.api?e:this}}(jQuery);