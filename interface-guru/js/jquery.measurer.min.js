/**
 * Оджинали аппиаред ин джейКоммон
 * 
 * @author Vlad Yakovlev (red.scorpix@gmail.com)
 * @copyright Art.Lebedev Studio (http://www.artlebedev.ru)
 * @version 0.3 alpha 7
 * @date 2009-12-29
 * @requires jQuery 1.3.2
 * 
 * Отслеживает изменение размеров окна браузера и масштабирование текста.
 * Отслеживание запускается только при добавлении первого хэндлера.
 *
 * @example
 * function funcBind() { alert('yoop'); }
 * measurer.bind(funcBind);
 * @description Теперь функция будет выполняться всякий раз, когда изменится размер окна браузера или размер текста.
 * measurer.unbind(funcBind);
 * @description А теперь — нет.
 *
 * @version 1.0
 */
$measurer=function(){function n(){null==r&&(r=$("<div></div>").css("height","1em").css("left","0").css("lineHeight","1em").css("margin","0").css("position","absolute").css("padding","0").css("top","-1em").css("visibility","hidden").css("width","1em").appendTo("body"),s=r.height())}function i(){return s}function e(){n(),$(window).resize(t),s=r.height(),setInterval(function(){var n=r.height();n!=s&&(s=n,t())},o)}function t(){for(var n=0;n<c.length;n++)c[n]()}var s,c=[],o=500,r=null,u=!1,h=!1;return $(function(){h=!0,u&&e()}),{resize:t,bind:function(n){r||(u=!0,h&&e()),c.push(n)},unbind:function(n){for(var i=0;i<c.length;i++)c[i]==n&&c.splice(i,1)},getHeight:i,createBlock:n}}();